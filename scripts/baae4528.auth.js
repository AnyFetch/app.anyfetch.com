"use strict";angular.module("anyfetchFrontApp.authenticationService",[]).factory("AuthService",["$cookies","$cookieStore","$rootScope","$http","$q","DocumentTypesService","ProvidersService",function(a,b,c,d,e,f,g){var h={currentUser:null},i=function(a){f.set(a.document_types),g.set(a.provider_status)};return h.login=function(b){var c,f=e.defer();return c=b?btoa(b.email+":"+b.password):a.credentials,d.defaults.headers.common.Authorization="Basic "+c,d({method:"GET",url:"http://api.anyfetch.com"}).success(function(b){h.currentUser={email:b.name,id:b.id,credentials:c},a.credentials=c,i(b),f.resolve(h.currentUser)}).error(f.reject),f.promise},h.logout=function(){console.log("loggin out"),h.currentUser=null,b.remove("credentials")},h.isLoggedin=function(){var c=e.defer();return h.currentUser?c.resolve(h.currentUser):a.credentials?h.login().then(function(a){console.log("Login ",a),h.currentUser=a,c.resolve(a)},function(){b.remove("credentials"),c.reject()}):c.reject(),c.promise},h}]);